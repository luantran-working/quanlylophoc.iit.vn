<Window x:Class="ClassroomManagement.Views.TestCreationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Tạo bài kiểm tra" 
        Height="700" Width="800"
        MinHeight="600" MinWidth="700"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- ============================================ -->
        <!-- HEADER -->
        <!-- ============================================ -->
        <Border Grid.Row="0" Padding="24,16">
            <Border.Background>
                <SolidColorBrush Color="{StaticResource AppPrimaryColor}"/>
            </Border.Background>
            
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Tạo bài kiểm tra mới" FontSize="20" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Thiết lập câu hỏi và cài đặt cho bài kiểm tra" 
                               FontSize="13" Foreground="#BBDEFB" Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Progress Steps -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Border Width="32" Height="32" CornerRadius="16" Background="White">
                        <TextBlock Text="1" FontWeight="Bold" Foreground="{StaticResource AppPrimaryBrush}"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <Rectangle Width="24" Height="2" Fill="#FFFFFF80" VerticalAlignment="Center" Margin="4,0"/>
                    <Border Width="32" Height="32" CornerRadius="16" Background="#FFFFFF40">
                        <TextBlock Text="2" FontWeight="Bold" Foreground="White"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <Rectangle Width="24" Height="2" Fill="#FFFFFF40" VerticalAlignment="Center" Margin="4,0"/>
                    <Border Width="32" Height="32" CornerRadius="16" Background="#FFFFFF40">
                        <TextBlock Text="3" FontWeight="Bold" Foreground="White"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ============================================ -->
        <!-- MAIN CONTENT -->
        <!-- ============================================ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="24">
            <StackPanel>
                
                <!-- Test Settings -->
                <materialDesign:Card Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="THÔNG TIN CƠ BẢN" FontSize="14" FontWeight="Bold" 
                                   Foreground="{StaticResource AppPrimaryBrush}" Margin="0,0,0,16"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBox Grid.Column="0" Grid.Row="0" 
                                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                     materialDesign:HintAssist.Hint="Tên bài kiểm tra"
                                     Margin="0,0,8,16"/>
                            
                            <ComboBox Grid.Column="1" Grid.Row="0"
                                      Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                      materialDesign:HintAssist.Hint="Môn học"
                                      Margin="8,0,0,16">
                                <ComboBoxItem Content="Toán học"/>
                                <ComboBoxItem Content="Vật lý"/>
                                <ComboBoxItem Content="Hóa học"/>
                                <ComboBoxItem Content="Ngữ văn"/>
                                <ComboBoxItem Content="Tiếng Anh"/>
                            </ComboBox>
                            
                            <ComboBox Grid.Column="0" Grid.Row="1"
                                      Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                      materialDesign:HintAssist.Hint="Thời gian làm bài"
                                      Margin="0,0,8,0">
                                <ComboBoxItem Content="15 phút"/>
                                <ComboBoxItem Content="30 phút"/>
                                <ComboBoxItem Content="45 phút"/>
                                <ComboBoxItem Content="60 phút"/>
                                <ComboBoxItem Content="90 phút"/>
                            </ComboBox>
                            
                            <ComboBox Grid.Column="1" Grid.Row="1"
                                      Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                      materialDesign:HintAssist.Hint="Số câu hỏi"
                                      Margin="8,0,0,0">
                                <ComboBoxItem Content="5 câu"/>
                                <ComboBoxItem Content="10 câu"/>
                                <ComboBoxItem Content="15 câu"/>
                                <ComboBoxItem Content="20 câu"/>
                                <ComboBoxItem Content="25 câu"/>
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </materialDesign:Card>
                
                <!-- Question List -->
                <materialDesign:Card Padding="20" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="CÂU HỎI" FontSize="14" FontWeight="Bold" 
                                       Foreground="{StaticResource AppPrimaryBrush}" VerticalAlignment="Center"/>
                            
                            <Button Grid.Column="1" Style="{StaticResource MaterialDesignOutlinedButton}"
                                    Foreground="{StaticResource AppPrimaryBrush}" BorderBrush="{StaticResource AppPrimaryBrush}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Plus" VerticalAlignment="Center"/>
                                    <TextBlock Text="Thêm câu hỏi" Margin="8,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                        
                        <!-- Question 1 -->
                        <Border Background="#F8F9FA" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                            <StackPanel>
                                <Grid Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Border Grid.Column="0" Width="28" Height="28" CornerRadius="14" 
                                            Background="{StaticResource AppPrimaryBrush}" Margin="0,0,12,0">
                                        <TextBlock Text="1" FontWeight="Bold" Foreground="White"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    
                                    <TextBlock Grid.Column="1" Text="Câu hỏi trắc nghiệm" 
                                               FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    
                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                        <Button Style="{StaticResource MaterialDesignIconButton}" 
                                                Width="32" Height="32" ToolTip="Sửa">
                                            <materialDesign:PackIcon Kind="Pencil" Width="18" Height="18"/>
                                        </Button>
                                        <Button Style="{StaticResource MaterialDesignIconButton}" 
                                                Width="32" Height="32" Foreground="#F44336" ToolTip="Xóa">
                                            <materialDesign:PackIcon Kind="Delete" Width="18" Height="18"/>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                                
                                <TextBox Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         materialDesign:HintAssist.Hint="Nhập nội dung câu hỏi..."
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="60"
                                         Margin="0,0,0,12"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <Border Grid.Column="0" Grid.Row="0" Background="White" 
                                            CornerRadius="6" Padding="12" Margin="0,0,6,6">
                                        <StackPanel Orientation="Horizontal">
                                            <RadioButton GroupName="Q1" Style="{StaticResource MaterialDesignRadioButton}"/>
                                            <TextBox materialDesign:HintAssist.Hint="Đáp án A" 
                                                     BorderThickness="0" Width="150"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border Grid.Column="1" Grid.Row="0" Background="White" 
                                            CornerRadius="6" Padding="12" Margin="6,0,0,6">
                                        <StackPanel Orientation="Horizontal">
                                            <RadioButton GroupName="Q1" Style="{StaticResource MaterialDesignRadioButton}"/>
                                            <TextBox materialDesign:HintAssist.Hint="Đáp án B" 
                                                     BorderThickness="0" Width="150"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border Grid.Column="0" Grid.Row="1" Background="White" 
                                            CornerRadius="6" Padding="12" Margin="0,6,6,0">
                                        <StackPanel Orientation="Horizontal">
                                            <RadioButton GroupName="Q1" Style="{StaticResource MaterialDesignRadioButton}"/>
                                            <TextBox materialDesign:HintAssist.Hint="Đáp án C" 
                                                     BorderThickness="0" Width="150"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border Grid.Column="1" Grid.Row="1" Background="White" 
                                            CornerRadius="6" Padding="12" Margin="6,6,0,0">
                                        <StackPanel Orientation="Horizontal">
                                            <RadioButton GroupName="Q1" Style="{StaticResource MaterialDesignRadioButton}"/>
                                            <TextBox materialDesign:HintAssist.Hint="Đáp án D" 
                                                     BorderThickness="0" Width="150"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                        <!-- Add More Question Button -->
                        <Border Background="#E8F5E9" CornerRadius="8" Padding="24" 
                                Cursor="Hand" BorderThickness="2" BorderBrush="{StaticResource AppPrimaryBrush}"
                                ToolTip="Nhấn để thêm câu hỏi mới">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Opacity" Value="0.7"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Opacity" Value="1"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <StackPanel HorizontalAlignment="Center">
                                <materialDesign:PackIcon Kind="PlusCircle" Width="32" Height="32" 
                                                          Foreground="{StaticResource AppPrimaryBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="Thêm câu hỏi mới" FontWeight="Medium" 
                                           Foreground="{StaticResource AppPrimaryBrush}" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>
                        
                    </StackPanel>
                </materialDesign:Card>
                
                <!-- Settings -->
                <materialDesign:Card Padding="20">
                    <StackPanel>
                        <TextBlock Text="CÀI ĐẶT BỔ SUNG" FontSize="14" FontWeight="Bold" 
                                   Foreground="{StaticResource AppPrimaryBrush}" Margin="0,0,0,16"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <CheckBox Content="Xáo trộn câu hỏi" 
                                          Style="{StaticResource MaterialDesignCheckBox}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Xáo trộn đáp án" 
                                          Style="{StaticResource MaterialDesignCheckBox}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Hiển thị đáp án sau khi nộp" 
                                          Style="{StaticResource MaterialDesignCheckBox}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1">
                                <CheckBox Content="Cho phép làm lại" 
                                          Style="{StaticResource MaterialDesignCheckBox}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Thông báo khi học sinh nộp bài" 
                                          Style="{StaticResource MaterialDesignCheckBox}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Tự động chấm điểm" 
                                          Style="{StaticResource MaterialDesignCheckBox}"
                                          IsChecked="True"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </materialDesign:Card>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- ============================================ -->
        <!-- FOOTER ACTIONS -->
        <!-- ============================================ -->
        <Border Grid.Row="2" Background="White" Padding="24,16">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="-2" Opacity="0.1" Color="Black" Direction="90"/>
            </Border.Effect>
            
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button Grid.Column="0" Style="{StaticResource MaterialDesignOutlinedButton}"
                        HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ContentSave" Width="18" Height="18" VerticalAlignment="Center"/>
                        <TextBlock Text="Lưu nháp" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Style="{StaticResource MaterialDesignOutlinedButton}" 
                            Content="Hủy" Margin="0,0,12,0" Click="CancelButton_Click"/>
                    <Button Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="{StaticResource AppPrimaryBrush}"
                            Click="CreateTest_Click">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Send" Width="18" Height="18" VerticalAlignment="Center"/>
                            <TextBlock Text="Gửi bài kiểm tra" Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
