<Window x:Class="ClassroomManagement.Views.LogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Log &amp; Debug Console" 
        Height="500" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E2E">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#2D2D3D" Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Console" Width="24" Height="24" 
                                              Foreground="White" VerticalAlignment="Center"/>
                    <TextBlock Text="Log &amp; Debug Console" FontSize="16" FontWeight="Bold"
                               Foreground="White" Margin="12,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <!-- Filter buttons -->
                    <ToggleButton x:Name="FilterInfo" Content="â„¹ï¸ Info" 
                                  Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                  Foreground="White" IsChecked="True" Margin="4,0"
                                  Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                    <ToggleButton x:Name="FilterNetwork" Content="ðŸŒ Network" 
                                  Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                  Foreground="White" IsChecked="True" Margin="4,0"
                                  Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                    <ToggleButton x:Name="FilterWarning" Content="âš ï¸ Warning" 
                                  Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                  Foreground="White" IsChecked="True" Margin="4,0"
                                  Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                    <ToggleButton x:Name="FilterError" Content="âŒ Error" 
                                  Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                  Foreground="White" IsChecked="True" Margin="4,0"
                                  Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                    <ToggleButton x:Name="FilterDebug" Content="ðŸ”§ Debug" 
                                  Style="{StaticResource MaterialDesignFlatPrimaryToggleButton}"
                                  Foreground="White" IsChecked="True" Margin="4,0"
                                  Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                    
                    <Button Content="Clear" Style="{StaticResource MaterialDesignOutlinedButton}"
                            Foreground="White" BorderBrush="White" Margin="16,0,0,0"
                            Click="ClearButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Log List -->
        <ListBox x:Name="LogListBox" Grid.Row="1" 
                 Background="Transparent" BorderThickness="0"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 VirtualizingStackPanel.IsVirtualizing="True"
                 VirtualizingStackPanel.VirtualizationMode="Recycling">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Padding="8,4" Margin="0,1" CornerRadius="4">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Background" Value="#2D2D3D"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Level}" Value="Error">
                                        <Setter Property="Background" Value="#3D2D2D"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Level}" Value="Warning">
                                        <Setter Property="Background" Value="#3D3D2D"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Level}" Value="Network">
                                        <Setter Property="Background" Value="#2D3D3D"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="{Binding FormattedTime}" 
                                       Foreground="#888" FontFamily="Consolas" FontSize="11"/>
                            <TextBlock Grid.Column="1" Text="{Binding LevelIcon}" 
                                       FontSize="12" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="2" Text="{Binding Source}" 
                                       Foreground="#4CAF50" FontWeight="Medium" FontSize="11"/>
                            <TextBlock Grid.Column="3" Text="{Binding Message}" 
                                       Foreground="White" TextWrapping="Wrap" FontSize="11"
                                       FontFamily="Consolas"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        
        <!-- Footer -->
        <Border Grid.Row="2" Background="#2D2D3D" Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="LogCountText" Text="0 entries" 
                               Foreground="#888" VerticalAlignment="Center"/>
                    <TextBlock Text=" | Log file: " Foreground="#888" VerticalAlignment="Center" Margin="16,0,0,0"/>
                    <TextBlock x:Name="LogFilePathText" Foreground="#4CAF50" 
                               VerticalAlignment="Center" FontSize="11"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <CheckBox x:Name="AutoScrollCheckBox" Content="Auto-scroll" 
                              Foreground="White" IsChecked="True"/>
                    <Button Content="Open Log Folder" 
                            Style="{StaticResource MaterialDesignFlatButton}"
                            Foreground="White" Margin="16,0,0,0"
                            Click="OpenLogFolder_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
