<Window x:Class="ClassroomManagement.Views.AssignmentListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Danh Sách Bài Tập" Height="600" Width="900"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Background="{StaticResource AppPrimaryBrush}" Padding="16">
            <TextBlock Text="Danh Sách Bài Nộp" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
        </Border>

        <Button Grid.Row="0" HorizontalAlignment="Right" Margin="10"
                Style="{StaticResource MaterialDesignFloatingActionMiniButton}"
                ToolTip="Làm mới" Click="Refresh_Click">
             <materialDesign:PackIcon Kind="Refresh" Foreground="White"/>
        </Button>

        <!-- List -->
        <DataGrid Grid.Row="1" x:Name="SubmissionGrid" AutoGenerateColumns="False"
                  IsReadOnly="True" ItemsSource="{Binding Submissions}"
                  SelectionMode="Single" SelectionUnit="FullRow"
                  Margin="10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Học sinh" Binding="{Binding StudentName}" Width="200"/>
                <DataGridTextColumn Header="MSSV" Binding="{Binding StudentId}" Width="150"/>
                <DataGridTextColumn Header="Thời gian" Binding="{Binding SubmittedAt, StringFormat='HH:mm:ss dd/MM/yyyy'}" Width="150"/>
                <DataGridTextColumn Header="Ghi chú" Binding="{Binding Note}" Width="*"/>
                <DataGridTemplateColumn Header="Files" Width="200">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ItemsControl ItemsSource="{Binding Files}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Margin="0,2">
                                            <Hyperlink NavigateUri="{Binding LocalPath}" RequestNavigate="Hyperlink_RequestNavigate">
                                                <TextBlock Text="{Binding FileName}"/>
                                            </Hyperlink>
                                        </TextBlock>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Thao tác" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                             <Button Content="Folder" Click="OpenFolder_Click" Tag="{Binding}" Padding="8,4" Height="24"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
